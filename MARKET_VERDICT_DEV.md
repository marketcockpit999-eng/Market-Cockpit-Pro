# MARKET VERDICT - 開発ログ
> 一流ストラテジストの思考を組み込んだ市場判断システム

## 🎯 コンセプト

従来のカテゴリ別表示（Fed政策、流動性など）は「材料」に過ぎない。
投資家が本当に知りたいのは「結論」（株は買いか売りか）。

### 設計哲学（2026-01-23確定）

**「誰の手法を使うか」ではなく「何を測るか」で設計する**

参考にする一流の思考：
- **Ray Dalio** - マクロ経済サイクル
- **Howard Marks** - マーケットサイクル、極端を避ける
- **Stanley Druckenmiller** - 流動性が全てを動かす
- **Michael Howell** - 流動性の定量化（Capital Wars）

共通エッセンスを抽出：
1. **流動性** → 定量化できる（Howell方式）
2. **サイクル位置** → 複数指標の組み合わせで判定
3. **極端度/センチメント** → 皆が強気の時こそ注意

---

## 📊 3本柱の構成

```
MARKET VERDICT スコア = 
    流動性スコア (40%)    ← Net Liquidity, GLP
  + サイクル位置 (30%)    ← 複合判定
  + テクニカル (30%)      ← MA乖離、RSI、52週位置
```

---

## 🗓️ 開発ロードマップ

| Phase | 内容 | 状態 | 担当スレッド |
|-------|------|------|-------------|
| 1 | 流動性スコア設計・計算ロジック | ✅ 完了 | Thread #2 |
| 2 | サイクル位置の判定ロジック | ✅ 完了 | Thread #2 |
| 2.5 | テクニカルスコア | ✅ 完了 | Thread #3 |
| 2.6 | 統合モジュール | ✅ 完了 | Thread #3 |
| 3 | UI実装（VERDICTページ） | ✅ 完了 | Thread #5 |
| 4 | WHYセクション（判定根拠表示） | ⏳ 未着手 | - |
| 5 | 検証・調整 | ⏳ 未着手 | - |

---

## 📜 スレッド履歴

| # | 日付 | URL | 作業内容 | 成果物 |
|---|------|-----|----------|--------|
| 1 | 2026-01-23 | https://claude.ai/chat/ee4ad37a-e43c-437f-8b20-bf9d0f0b1121 | 構想立案、設計哲学確定 | ✅ コンセプト確定、DEV.md作成 |
| 2 | 2026-01-23 | https://claude.ai/project/019bb281-b291-72ad-85c0-ceecab814cb7 | Phase 1 流動性スコア | ✅ verdict_liquidity.py作成 |
| 3 | 2026-01-23 | https://claude.ai/project/019bb281-b291-72ad-85c0-ceecab814cb7 | Phase 2.5-2.6 | ✅ verdict_technical.py, verdict_main.py作成 |
| 4 | 2026-01-23 | d41b6fc7-2f26-4a77-a7e7-03a1a8b40c2b | (Handoff only) | Git操作指示 |
| 5 | 2026-01-23 | 現在のスレッド | Phase 3 UI実装 | ✅ pages/13_verdict.py作成、ナビゲーション追加 |

---

## 📐 Phase 1: 流動性スコア設計

### 使用する指標

| 指標 | ソース | 役割 |
|------|--------|------|
| Net Liquidity | 計算値 | Fed資産 - TGA - RRP |
| Global Liquidity Proxy | 計算値 | Fed + ECB - TGA - RRP |
| ON_RRP | FRED | 余剰流動性の滞留 |
| Reserves | FRED | 銀行準備預金 |
| M2SL | FRED | マネーサプライ |

### スコア化の方法 → **案A採用（パーセンタイル方式）**

```python
流動性スコア (0-100) = 
    Net Liquidity パーセンタイル × 40%
  + Reserves パーセンタイル × 30%
  + ON_RRP 逆パーセンタイル × 20%  # RRP低い = 流動性良
  + M2 YoY変化率スコア × 10%
```

**実装ファイル**: `utils/verdict_liquidity.py`

**主要関数**:
- `calculate_liquidity_score(data)` → (score, details)
- `interpret_liquidity_score(score)` → 解釈辞書
- `get_percentile_rank()` → パーセンタイル計算

---

## 📐 Phase 2: サイクル位置判定（予定）

### サイクルの段階

1. 後退後期（回復前夜）
2. 拡大初期（上昇開始）
3. 拡大中期（安定成長）
4. 拡大後期（過熱警戒）
5. 後退初期（ピーク後）
6. 後退中期（下落進行）

### 判定に使う指標候補

- イールドカーブ（T10Y2Y）
- 失業率変化（UNRATE）
- 信用スプレッド（Credit_Spread）
- Leading_Index
- ISM PMI（将来追加予定）

---

## 🔒 設計原則

1. **シンプルに始めて改良** - 完璧より動くもの優先
2. **透明性** - なぜその判定かを説明できる
3. **謙虚さ** - VERDICTは「答え」ではなく「会話のきっかけ」
4. **検証可能** - 過去データで妥当性を確認できる

---

## 📝 メモ・議論ログ

### 2026-01-23
- 高橋さんの洞察：「一流の思考を全部入れると混乱するのでは？」
- 結論：個別手法ではなく**共通エッセンス**（流動性＋サイクル）を軸に
- これにより「Dalioモード」「Marksモード」のような混乱を回避
