# ğŸ”„ ã‚¹ãƒ¬ãƒƒãƒ‰å¼•ãç¶™ããƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
**æ—¥æ™‚**: 2026-01-23
**å‰ã‚¹ãƒ¬ãƒƒãƒ‰URL**: https://claude.ai/chat/4dc90279-f519-4e71-bcf7-045b1d5c671b

---

## ğŸ“‹ æœªå®Œäº†ã‚¿ã‚¹ã‚¯ä¸€è¦§ï¼ˆ7é …ç›®ï¼‰

### âš ï¸ é‡è¦ï¼šå¤–ç§‘çš„ä¿®æ­£ã®ãƒ«ãƒ¼ãƒ«
- **çµ¶å¯¾ã«é–¢ä¿‚ã®ãªã„é …ç›®ã«å½±éŸ¿ã‚’ä¸ãˆãªã„**
- å„ä¿®æ­£ã¯æœ€å°é™ã®å¤‰æ›´ã§è¡Œã†
- ä¿®æ­£å‰ã«å¿…ãšè©²å½“ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç¢ºèª
- æ—¢å­˜ã®show_metric_with_sparklineå‘¼ã³å‡ºã—ã‚’å£Šã•ãªã„

---

## ã‚¿ã‚¹ã‚¯è©³ç´°

### 1ï¸âƒ£ i18n.py: ç¿»è¨³ã‚­ãƒ¼ä¿®æ­£
**ãƒ•ã‚¡ã‚¤ãƒ«**: `utils/i18n.py`
**å•é¡Œ**: `source_update_date`ã®æ—¥æœ¬èªç¿»è¨³ãŒã€Œæä¾›å…ƒæ›´æ–°:ã€ã«ãªã£ã¦ã„ã‚‹
**ä¿®æ­£**: ã€Œæä¾›å…ƒæ›´æ–°æ—¥:ã€ã«å¤‰æ›´

**ä¿®æ­£ç®‡æ‰€** (ç´„2200è¡Œç›®ä»˜è¿‘):
```python
# ç¾åœ¨
'source_update_date': 'ğŸ”„ æä¾›å…ƒæ›´æ–°: {date}',
# ä¿®æ­£å¾Œ
'source_update_date': 'ğŸ”„ æä¾›å…ƒæ›´æ–°æ—¥: {date}',
```

---

### 2ï¸âƒ£ 01_liquidity.py: EFFR - IORB
**ãƒ•ã‚¡ã‚¤ãƒ«**: `pages/01_liquidity.py`
**å•é¡Œ**: EFFR-IORBã¯è¨ˆç®—ã§ç”Ÿæˆã•ã‚ŒãŸSeriesã®ãŸã‚ã€`show_metric`ã‹ã‚‰æ—¥ä»˜æƒ…å ±ãŒå–å¾—ã§ããªã„
**ä¿®æ­£**: EFFRã¾ãŸã¯IORBã®æ—¥ä»˜æƒ…å ±ã‚’æ‰‹å‹•ã§å–å¾—ã—ã¦è¡¨ç¤º

**ä¿®æ­£ç®‡æ‰€** (ç´„270è¡Œç›®ä»˜è¿‘):
```python
    st.markdown(f"#### {t('effr_iorb')}")
    diff = None
    if 'EFFR' in df.columns and 'IORB' in df.columns:
        diff = (df['EFFR'] - df['IORB']) * 100
    show_metric(t('effr_iorb'), diff, "bps", explanation_key="EFFR_IORB", notes=t('effr_iorb_notes'))
```

**è¿½åŠ ãŒå¿…è¦ãªã‚³ãƒ¼ãƒ‰**ï¼ˆshow_metricå‘¼ã³å‡ºã—ã®å¾Œã«è¿½åŠ ï¼‰:
```python
    # EFFR-IORBç”¨ã®æ—¥ä»˜æƒ…å ±ã‚’æ‰‹å‹•è¡¨ç¤º
    if 'EFFR' in df.columns and hasattr(df, 'attrs'):
        effr_date = df.attrs.get('last_valid_dates', {}).get('EFFR')
        effr_release = df.attrs.get('fred_release_dates', {}).get('EFFR')
        if effr_date:
            freq_key = DATA_FREQUENCY.get('EFFR', '')
            if freq_key:
                freq_label = t(f'freq_{freq_key}')
                st.caption(f"ğŸ“… {t('data_period')}: {effr_date} ({freq_label})")
            else:
                st.caption(f"ğŸ“… {t('data_period')}: {effr_date}")
        if effr_release:
            st.caption(f"ğŸ”„ {t('source_update')}: {effr_release}")
```

---

### 3ï¸âƒ£ 09_banking.py: éŠ…/é‡‘ãƒ¬ã‚·ã‚ª
**ãƒ•ã‚¡ã‚¤ãƒ«**: `pages/09_banking.py`
**å•é¡Œ**: éŠ…/é‡‘ãƒ¬ã‚·ã‚ªã«ğŸ“…ãƒ‡ãƒ¼ã‚¿æœŸé–“ã€ğŸ”„æä¾›å…ƒæ›´æ–°æ—¥ã€ğŸ“Š60æ—¥æ¨ç§»ãŒãªã„
**ä¿®æ­£ç®‡æ‰€** (ç´„135è¡Œç›®ä»˜è¿‘):

**ç¾åœ¨ã®ã‚³ãƒ¼ãƒ‰**:
```python
with col4:
    st.markdown(f"#### {t('bank_copper_gold')}")
    st.caption(t('bank_copper_gold_desc'))
    if 'Copper' in df.columns and 'Gold' in df.columns:
        copper = df.get('Copper')
        gold = df.get('Gold')
        if copper is not None and gold is not None:
            ratio_series = (copper / gold) * 1000
            latest_val = ratio_series.dropna().iloc[-1] if not ratio_series.dropna().empty else 0
            st.metric(t('bank_cu_au_ratio'), f"{latest_val:.2f}", help=t('bank_cu_au_help'))
            if not ratio_series.dropna().empty:
                st.markdown(f"###### {t('long_term_trend')}")
                styled_line_chart(ratio_series, height=150)
```

**ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰**:
```python
with col4:
    st.markdown(f"#### {t('bank_copper_gold')}")
    st.caption(t('bank_copper_gold_desc'))
    if 'Copper' in df.columns and 'Gold' in df.columns:
        copper = df.get('Copper')
        gold = df.get('Gold')
        if copper is not None and gold is not None:
            ratio_series = (copper / gold) * 1000
            latest_val = ratio_series.dropna().iloc[-1] if not ratio_series.dropna().empty else 0
            st.metric(t('bank_cu_au_ratio'), f"{latest_val:.2f}", help=t('bank_cu_au_help'))
            
            # æ—¥ä»˜æƒ…å ±ã‚’è¡¨ç¤º
            if hasattr(df, 'attrs'):
                copper_date = df.attrs.get('last_valid_dates', {}).get('Copper')
                copper_release = df.attrs.get('fred_release_dates', {}).get('Copper')
                if copper_date:
                    st.caption(f"ğŸ“… {t('data_period')}: {copper_date}")
                if copper_release:
                    st.caption(f"ğŸ”„ {t('source_update')}: {copper_release}")
            
            # 60æ—¥æ¨ç§»ï¼ˆã‚¹ãƒ‘ãƒ¼ã‚¯ãƒ©ã‚¤ãƒ³ï¼‰
            if not ratio_series.dropna().empty:
                recent_60 = ratio_series.tail(60)
                st.caption(f"ğŸ“Š {t('sparkline_label')}")
                import plotly.graph_objects as go
                fig = go.Figure()
                fig.add_trace(go.Scatter(
                    x=recent_60.index,
                    y=recent_60.values,
                    mode='lines',
                    line=dict(color='#FF9F43', width=2),
                    fill='tozeroy',
                    fillcolor='rgba(255, 159, 67, 0.3)',
                    showlegend=False
                ))
                fig.update_layout(
                    height=100,
                    margin=dict(l=0, r=0, t=0, b=0),
                    xaxis=dict(visible=False),
                    yaxis=dict(visible=False),
                    plot_bgcolor='rgba(0,0,0,0)',
                    paper_bgcolor='rgba(0,0,0,0)',
                    hovermode=False
                )
                st.plotly_chart(fig, use_container_width=True, config={'displayModeBar': False},
                               key=f"spark_cu_au_{uuid.uuid4().hex[:8]}")
                
                # é•·æœŸæ¨ç§»
                st.markdown(f"###### {t('long_term_trend')}")
                styled_line_chart(ratio_series, height=150)
```

---

### 4ï¸âƒ£ 04_crypto.py: RWAé–¢é€£4é …ç›®
**ãƒ•ã‚¡ã‚¤ãƒ«**: `pages/04_crypto.py`
**å•é¡Œ**: ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ã‚´ãƒ¼ãƒ«ãƒ‰ã€ãã®ä»–RWAã€ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ç±³å›½å‚µã€å¸‚å ´æ·±åº¦ã«ğŸ“…ãƒ‡ãƒ¼ã‚¿æœŸé–“ãŒãªã„
**ä¿®æ­£**: treasury_dataã‹ã‚‰å–å¾—ã—ãŸtimestampã‚’å„é …ç›®ã®ä¸‹ã«è¡¨ç¤º

**ä¿®æ­£ç®‡æ‰€** (ç´„80è¡Œç›®ä»˜è¿‘ - ãƒˆãƒ¼ã‚¯ãƒ³åŒ–ã‚»ã‚¯ã‚·ãƒ§ãƒ³):

ç¾åœ¨ã¯`st.caption(f"ğŸ”„ {t('source_update')}: ...")`ã®ã¿ã€‚
å„ã‚«ãƒ¼ãƒ‰ï¼ˆcol1, col2, col3ï¼‰ã®ä¸‹ã«ğŸ“…ãƒ‡ãƒ¼ã‚¿æœŸé–“ã‚‚è¿½åŠ :

```python
    col1, col2, col3 = st.columns(3)
    with col1:
        st.markdown(f"### {t('tokenized_treasury')}")
        st.metric(t('treasury_tvl'), f"${treasury_data['treasury']['total_tvl']:.2f} B", help=t('treasury_help'))
        # è¿½åŠ : æ—¥ä»˜æƒ…å ±
        if 'timestamp' in treasury_data:
            ts = treasury_data['timestamp'][:10]
            st.caption(f"ğŸ“… {t('data_period')}: {ts}")
            st.caption(f"ğŸ”„ {t('source_update')}: {treasury_data['timestamp'][:16].replace('T', ' ')}")
    with col2:
        st.markdown(f"### {t('tokenized_gold')}")
        st.metric(t('gold_tvl'), f"${treasury_data['gold']['total_tvl']:.2f} B", help=t('gold_help'))
        if 'timestamp' in treasury_data:
            ts = treasury_data['timestamp'][:10]
            st.caption(f"ğŸ“… {t('data_period')}: {ts}")
            st.caption(f"ğŸ”„ {t('source_update')}: {treasury_data['timestamp'][:16].replace('T', ' ')}")
    with col3:
        st.markdown(f"### {t('other_rwa')}")
        st.metric(t('other_rwa_tvl'), f"${treasury_data['other_rwa']['total_tvl']:.2f} B", help=t('other_rwa_help'))
        if 'timestamp' in treasury_data:
            ts = treasury_data['timestamp'][:10]
            st.caption(f"ğŸ“… {t('data_period')}: {ts}")
            st.caption(f"ğŸ”„ {t('source_update')}: {treasury_data['timestamp'][:16].replace('T', ' ')}")
```

**å¸‚å ´æ·±åº¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³** (ç´„160è¡Œç›®ä»˜è¿‘):
```python
# è¿½åŠ : avg_cex, avg_dexã®å¾Œã«æ—¥ä»˜æƒ…å ±
from datetime import datetime
st.caption(f"ğŸ“… {t('data_period')}: {datetime.now().strftime('%Y-%m-%d')}")
st.caption(f"ğŸ”„ {t('source_update')}: {datetime.now().strftime('%Y-%m-%d %H:%M')} (CoinGecko)")
```

---

### 5ï¸âƒ£ 11_analysis_lab.py: ã€Œè¨ˆç®—å€¤ã€å‰Šé™¤
**ãƒ•ã‚¡ã‚¤ãƒ«**: `pages/11_analysis_lab.py`
**å•é¡Œ**: GLPã€YoY Growthç­‰ã§ã€ŒğŸ”„ è¨ˆç®—å€¤ã€ã¨è¡¨ç¤ºã•ã‚Œã‚‹
**ä¿®æ­£**: `st.caption(f"ğŸ”„ {t('lab_calculated')}")` ã®è¡Œã‚’å‰Šé™¤

**å‰Šé™¤ç®‡æ‰€**:
- ç´„50è¡Œç›®: `st.caption(f"ğŸ”„ {t('lab_calculated')}")`

ã¾ãŸã€YoY Growthã‚»ã‚¯ã‚·ãƒ§ãƒ³ï¼ˆç´„60-90è¡Œç›®ï¼‰ã«ã‚‚æ—¥ä»˜æƒ…å ±ãŒãªã„ã®ã§è¿½åŠ æ¤œè¨ã€‚

---

### 6ï¸âƒ£ 12_currency_lab.py: USD-denominatedæ—¥ä»˜è¡¨ç¤º
**ãƒ•ã‚¡ã‚¤ãƒ«**: `pages/12_currency_lab.py`
**å•é¡Œ**: Goldå»ºã¦ãƒ»BTCå»ºã¦ã«ã¯`display_source_update`å‘¼ã³å‡ºã—ãŒã‚ã‚‹ãŒã€USDå»ºã¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã«ã¯ãªã„
**ä¿®æ­£**: USDå»ºã¦ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æœ€å¾Œã«ã‚‚`display_source_update`è¿½åŠ 

**ä¿®æ­£ç®‡æ‰€** (ç´„220è¡Œç›®ä»˜è¿‘ã€USD-denominatedã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®æœ€å¾Œ):
```python
        # è¿½åŠ : Source updateè¡¨ç¤º
        usd_data_cols = ['USDJPY', 'EURUSD', 'USDCNY', 'GBPUSD', 'USDCHF', 'AUDUSD', 'BTC', 'ETH', 'Gold', 'Silver']
        display_source_update(df, usd_data_cols)
```

---

### 7ï¸âƒ£ 13_verdict.py: å¤šè¨€èªåŒ–ç¢ºèª
**ãƒ•ã‚¡ã‚¤ãƒ«**: `pages/13_verdict.py`
**å•é¡Œ**: `st.session_state.get('language', 'en')` ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŒã€ä»–ãƒšãƒ¼ã‚¸ã¯`lang`ã‚’ä½¿ç”¨
**ä¿®æ­£**: `'language'` â†’ `'lang'` ã«å¤‰æ›´ã€ã¾ãŸã¯i18nã®get_current_language()ã‚’ä½¿ç”¨

**ä¿®æ­£ç®‡æ‰€** (ç´„130è¡Œç›®):
```python
# ç¾åœ¨
lang = st.session_state.get('language', 'en')

# ä¿®æ­£å¾Œ
from utils.i18n import get_current_language
lang = get_current_language()
```

ã¾ãŸã€ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚ŒãŸæ—¥æœ¬èªãƒ†ã‚­ã‚¹ãƒˆãŒãªã„ã‹ç¢ºèª:
- ã€Œè­¦æˆ’ã€ã€Œä¸­ç«‹ã€ã€Œå¼·æ°—ã€ç­‰ã¯ç¾åœ¨ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã‚‹
- ã“ã‚Œã‚‰ã‚’i18nå¯¾å¿œã«ã™ã‚‹å ´åˆã¯è¿½åŠ ã®ç¿»è¨³ã‚­ãƒ¼ãŒå¿…è¦

---

## âš ï¸ ä¿®æ­£æ™‚ã®æ³¨æ„äº‹é …

1. **1ã¤ãšã¤ä¿®æ­£** - è¤‡æ•°ã®ä¿®æ­£ã‚’åŒæ™‚ã«è¡Œã‚ãªã„
2. **ä¿®æ­£å‰ã«ãƒ•ã‚¡ã‚¤ãƒ«ç¢ºèª** - å¿…ãš`view`ãƒ„ãƒ¼ãƒ«ã§ç¾çŠ¶ã‚’ç¢ºèª
3. **å¤–ç§‘çš„ç·¨é›†** - `str_replace`ã§æœ€å°é™ã®å¤‰æ›´
4. **æ—¢å­˜æ©Ÿèƒ½ã‚’å£Šã•ãªã„** - ç‰¹ã«`show_metric_with_sparkline`ã®å‘¼ã³å‡ºã—ãƒ‘ã‚¿ãƒ¼ãƒ³

---

## ğŸ“ é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ä¸€è¦§

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `utils/i18n.py` | ç¿»è¨³ã‚­ãƒ¼å®šç¾© |
| `utils/charts.py` | show_metric, show_metric_with_sparklineå®šç¾© |
| `pages/01_liquidity.py` | æµå‹•æ€§ã‚¿ãƒ– |
| `pages/04_crypto.py` | æš—å·è³‡ç”£ã‚¿ãƒ– |
| `pages/08_sentiment.py` | ã‚»ãƒ³ãƒãƒ¡ãƒ³ãƒˆã‚¿ãƒ– |
| `pages/09_banking.py` | éŠ€è¡Œã‚»ã‚¯ã‚¿ãƒ¼ã‚¿ãƒ– |
| `pages/11_analysis_lab.py` | åˆ†æãƒ©ãƒœã‚¿ãƒ– |
| `pages/12_currency_lab.py` | é€šè²¨ãƒ©ãƒœã‚¿ãƒ– |
| `pages/13_verdict.py` | Market Verdictã‚¿ãƒ– |

---

## ğŸ”§ æ¨å¥¨ä½œæ¥­é †åº

1. i18n.pyä¿®æ­£ï¼ˆå½±éŸ¿ç¯„å›²æœ€å°ï¼‰
2. 01_liquidity.py EFFR-IORBä¿®æ­£
3. 09_banking.py éŠ…/é‡‘ãƒ¬ã‚·ã‚ªä¿®æ­£
4. 04_crypto.py RWAé–¢é€£ä¿®æ­£
5. 11_analysis_lab.py è¨ˆç®—å€¤å‰Šé™¤
6. 12_currency_lab.py USD-denominatedä¿®æ­£
7. 13_verdict.py å¤šè¨€èªåŒ–ä¿®æ­£

---

**ä½œæˆè€…**: Claude
**ä½œæˆæ—¥æ™‚**: 2026-01-23
